# Obsidian 渐进式阅读插件

这是一个为 Obsidian 设计的渐进式阅读插件，它可以帮助你管理和复习笔记。

## 已知问题

- [x] 新添加标签的笔记总是插入到排程器最上面，导致笔记按时间倒序排列而不是正序
- [x] 排程算法缺少随机性，需要当日内乱序排程和作用于所有优先级的排程随机性功能
- [x] 使用快捷键下一步时总是处理排程器最上方的笔记，而不是当前打开的
- [x] 排程器侧边栏高亮不正确
- [x] 优先级功能仅作用于日期排程，缺少当日内优先级队列（和作用于优先级队列的随机性）
- [ ] 新增的乱序功能每次刷新/排程都会重新打乱
- [ ] 过期卡片会堆积在列表中，缺少延期功能，且被乱序功能打乱日期

## 修改内容

0. **警告**：代码修改完全由**AI生成**，可能存在预期外的问题
1. **优先级队列**：今日复习列表按照 `高 -> 中 -> 低` 的顺序排列
2. **组内乱序**：可开启组内乱序，打乱同优先级的笔记顺序
3. **优先级随机提升**：以可配置的概率将低、中优先级的笔记临时提升到更高的队列中进行复习
4. **快捷键修复**：所有快捷键（如“下一步”、“搁置”）都会优先作用于当前打开的笔记，而非队列顶端的笔记
5. **高亮修复**：侧边栏的复习列表会高亮当前打开的笔记，而非队列顶端的笔记

## 功能特点

1. **智能复习排程**
   - 使用间隔重复算法自动安排复习时间
   - 支持优先级设置（高、中、低）
   - 优先级会影响复习间隔：
     - 高优先级：减少 20% 延迟
     - 中优先级：保持原有延迟
     - 低优先级：增加 20% 延迟

2. **灵活的优先级管理**
   - 通过标签设置优先级：`priority-high`、`priority-medium`、`priority-low`
   - 支持快捷键快速设置优先级
   - 低优先级内容有随机概率提前复习，避免被遗忘

3. **便捷的操作界面**
   - 直观的复习队列视图
   - 显示今天需要复习的内容
   - 预览即将到来的复习任务
   - 支持自定义复习日期

4. **快捷键支持**
   - 开始复习：`Ctrl+Shift+R`
   - 删除笔记：`Ctrl+Shift+D`
   - 设置高优先级：`Ctrl+Shift+1`
   - 设置中优先级：`Ctrl+Shift+2`
   - 设置低优先级：`Ctrl+Shift+3`

## 安装方法

1. 在 Obsidian 中打开设置
2. 进入第三方插件设置
3. 关闭安全模式
4. 打开插件文件夹
5. 从仓库下载压缩包
6. 解压到插件文件夹
7. 启用插件

## 使用方法

1. **添加复习标签**
   ```yaml
   tags:
     - review
     - priority-high  # 可选：priority-medium, priority-low
   ```

2. **开始复习**
   - 使用命令面板（`Ctrl+P`）打开复习排程器
   - 或使用快捷键 `Ctrl+Shift+R` 直接开始复习

3. **管理优先级**
   - 使用快捷键设置优先级
   - 或直接编辑笔记的标签

4. **自定义设置**
   - 调整复习间隔乘数
   - 设置优先级影响系数
   - 修改低优先级提前复习的概率
   - 自定义快捷键

## 配置选项

1. **间隔乘数**
   - 默认值：1.5
   - 用于计算下次复习间隔

2. **优先级乘数**
   - 高优先级：0.8（减少 20% 延迟）
   - 中优先级：1.0（保持原有延迟）
   - 低优先级：1.2（增加 20% 延迟）

3. **排程随机度**
   - 默认值：0.1（代表 +/-10% 的随机延迟）
   - 为排程时的复习间隔计算增加随机性

4. **完成后自动跳转**
   - 不跳转：完成后关闭笔记，不打开新笔记
   - 跳转到队列顶端：打开当前队列的第一个笔记
   - 跳转到列表下一篇：打开刚才处理的笔记在队列中的下一个笔记

5. **优先级随机提升**：
   - 开启后，低优先级的笔记有几率被临时提升到更高优先级队列
   - 优先级提升概率：每个笔记有多大几率被提升一级，默认为 5%


## 许可证

MIT License
